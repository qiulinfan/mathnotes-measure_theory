\chapter{product space and product measure [Fol 1.2, finished; 2.5]}

Goal: Given $(X_i, \mathcal{A}_i, \mu_i)$, construct $X = \prod X_i $, s.t. 
\[
\mu(E_1 \times E_2 )  = \mu_1(E_1) \mu_2(E_2)
\]
So that we can do Fubini (iterated integration) like that in Riemann integral.


\section{product $\sigma$-algebra}
\begin{definition}{product $\sigma$-algebra}
Suppose $(X_i, \mathcal{A}_i)$ mble, $1 \leq i\leq n$, the product $\sigma$-algebra $A_1 \otimes \cdots \otimes A_n$ on $X_1 \times \cdots \times X_n$ is the smallest $\sigma$-algebra s.t. the\textbf{ coordinate map }$$ \pi_j: X_1 \times \cdots \times X_n \rightarrow X_j$$\textbf{is measurable.}\\
即 the $\sigma$-algebra generated by: \(
\{  \pi_\alpha (E_\alpha) : E_\alpha  \in \mathcal{A_\alpha} \}
\). \[
A_1 \otimes \cdots \otimes A_n : = <\{  \pi_\alpha (E_\alpha) : E_\alpha  \in \mathcal{A_\alpha} \}>
\]

\end{definition}


我们容易发现:
\begin{proposition}
$$A_1 \otimes \cdots \otimes A_n = <\{  E_1\times \cdots \times E_n \in \mathcal{A}_i \times \cdots \times \mathcal{A}_n  \}>$$
\end{proposition}
\begin{proof}
    By def 易得. (Prop 1.14 in book).\\
\end{proof}
\begin{remark}
  这里只考虑了有限情况, 但是无限的乃至于 ctblly 无限的相似. 取所有可能的 set product 作为 geneating 即可.
\end{remark}



\subsection{product Borel algebra $\subset$ Borel algebra of the product space}
\begin{proposition}
    If $X_1,\cdots, X_n $ are metric spaces. Let $X := X_1 \times \cdots \times X_n$ (with product metric), then: $$\bigotimes_{i=1}^n \mathcal{B}_{X_i} \subseteq \mathcal{B}_X$$
\textbf{and the equality holds if $X_i$ separable $\forall i$.}
\end{proposition}
\begin{proof}
   $$\bigotimes_{i=1}^n \mathcal{B}_{X_i}  \overset{\text{by prop}}{=} < \{ U_1\times \cdots \times U_n  \text{ each open} \} > \subseteq\mathcal{B}_X $$
   Now let $C_i \subseteq X_i$ dense, ctbl. \\
   Set $$\mathcal{E}_i  := \{  B_r(x) \mid x\in C_i \;,\; r\in \mathbb{Q}_{>0}  \} \subseteq \mathcal{B}_{X_i} $$
   Then: \textbf{every open set in $X_1 \times \cdots \times X_n$ is a ctbl union of products $B_1 \times \cdots \times B_n$}, each $B_1 \in \mathcal{E}_i$.
   Then we have: $$B_X = <\{B_1 \times ...\times B_n\}> \subset \bigotimes_1^n B_{X_i}$$
\end{proof}
\begin{remark}
    显然. \textbf{有限 index} 情况下, 在 product topology 中, \textbf{product of open sets仍然是 open set}, 但是 open sets 可以不止是 product of open sets 这些. 因而 \(\bigotimes_{i=1}^n \mathcal{B}_{X_i} \subseteq \mathcal{B}_X\). \\
 并且在 separable 的 topological space 上, 比如 $\mathbb{R}$, 我们有: $\mathbb{R}^n$ 中的任意 open set 都是 a ctbl union of open boxes. 于是 \(\bigotimes_{i=1}^n \mathcal{B}_{\mathbb{R}}  = \mathcal{B}_{\mathbb{R}^n}\)
\end{remark}

\begin{example}
    $$\mathcal{B}_{\mathbb{R}^n} = \mathcal{B}_{\mathbb{R}} \otimes \cdots \otimes \mathcal{B}_{\mathbb{R}}$$
\end{example}


\begin{corollary}
    if $(X,\mathcal{A})$ is a mble space, then $$f:X\rightarrow \mathbb{C}  \;\;(\mathcal{A},\mathcal{B}_{\mathbb{C}})\text{-mble } \Longleftrightarrow \Re f, \Im f \;\;\mathcal{A}\text{-mble}$$
\end{corollary}
\begin{proof}
    略.
\end{proof}

\section{construction of product measure}
下面我们构建 product measure: 
Let $(X_i \,,\mathcal{A}_i\, , \mu_i)$, $1 \leq i \leq n$ be mble spaces.\\
    And let $X := X_1 \times ... \times X_n$, $\mathcal{A}:= \mathcal{A}_i \otimes \cdots \otimes \mathcal{A}_n$
Goal: 通过 Hahn-Kromolgrov 来构建 product measure on product mble space.
Idea: Let $$\mathcal{A}' := \{   \text{all finite disjoint unions of rectangles (each measurable)} A_1 \times \cdots \times A_n\}$$
\textbf{Step 1: }
\subsection{all finite disjoint unions of rectangles as an algebra}
\begin{proposition}
   $\mathcal{A}'$ is an algebra.
\end{proposition}
\begin{proof}
The set $\mathcal{E}:= \{\text{rectangles}\} \subseteq \mathcal{P}(X)$ satisfies:
    \begin{itemize}
        \item $\varnothing \in \mathcal{E}$
        \item $E,F \in \mathcal{E} \implies E \cap F \in \mathcal{E}$
        \item $E \in \mathcal{ E} \implies E^c \text{ is a finite disjoint union of recs}$ (画图可知).\\\\
    \end{itemize}
\end{proof}

\textbf{Step 2: }
\subsection{各维度 measure 的 product 作为 rectangle 的 measure, 从而定义 premeasure}
Now define $$\mu' : \mathcal{A}' \rightarrow [0,\infty]$$ as follows: $$ \mu'(\bigsqcup_{k=1}^N E_1^{(k)} \times \cdots \times E_n^{(k)}) = \sum_{k=1}^N \prod_{i=1}^n \mu_i (E_i^{(k)}) $$
Claim 2:
\begin{proposition}
   \textbf{ (1) $\mu'$ is a well-defined premeasure on $\mathcal{A}'$.\\
    (2) If each $\mu_i$ is $\sigma$-finite, so is $\mu'$.}   
\end{proposition}
\begin{proof}
 Sketch: (2) DIY.
    (1) STS(check): if $E = E_1 \times \cdots E_n$ is a finite or ctbl union of rects $E^{(k)} = E_1^{(k)}\times \cdots \times E_n^{(k)} $, then $$\prod_1^n  \mu_i(E_i) = \sum_k \prod_1^n \mu_i(E_i^{(k)})  $$
 Use Tonelli for sums and integrals: \begin{align}
        \prod_1^n \chi_{E_i} (x_i) &= \chi_E (x_1\,, \cdots \,,x_n) \\
        &= \sum_k \chi_{E^{(k)}} (x_1 \,, \cdots \,, x_n) \\
        &= \sum_k \prod_1^n \chi_{E_i^{(k)}} (x_i)
    \end{align}
Integrate w.r.t. $x_1$: 
\begin{align}
\mu_1(E_1) \prod_{i=1}^n \chi_{E_i} (x_i)& = \int \sum_k \prod_1^n \chi_{E_i ^{(k)}} (x_i)    \\
&\overset{\text{Tonelli}}{=}  \sum_k  \int (\prod_1^n   \chi_{E_i ^{(k)}} (x_i) )  d \, \mu_1 (x_1) \\
& = \sum_k \mu_1(E_1^{(k)}) \prod_{i=1}^n \chi_{E_i^{(k)}} (x_i)
\end{align}
And repeat for $i=2,\cdots,n$.\\\\
    
\end{proof}

\subsection{HK extension of the premeasure as definition of product measure}
\textbf{Step 3: 现在已经有了 $\sigma$-finite 的 premeasure, 我们可以应用 HK Thm 构建出完整的 measure.}
Now use HK:
\begin{corollary}
    $\exists$ measure $\mu := \mu_1 \times \cdots \times \mu_n$ on $\mathcal{A} = \mathcal{A}_1 \otimes \cdots \mathcal{A}_n$ extending $\mu'$.\\
    (\textbf{And if each $\mu_i $ are $\sigma$-finite, then product measure 也 $\sigma$-finite, 从而 $\mu$ 是 unique extension.)}
\end{corollary}
由此, 我们从 $\mathcal{A}_1 , \cdots ,\mathcal{A}_n$ 的 measure 中构建出了它们的 product measure.\\\\


\subsection{associativity of product $\sigma$-algebra and $\sigma$-finite product measure}
\begin{corollary}{assotiativity}
总有 $$ \mathcal{A}_1 \otimes \mathcal{A}_2  \otimes \mathcal{A}_3 =  (\mathcal{A}_1 \otimes \mathcal{A}_2)  \otimes \mathcal{A}_3 =   \mathcal{A}_1 \otimes (\mathcal{A}_2  \otimes \mathcal{A}_3 ) $$ 并且, if $\mu_1, \mu_2,\mu_3$ are $\sigma$-finite, then: $$\mu_1 \times \mu_2 \times \mu_3 = (\mu_1 \times \mu_2) \times \mu_3  = \mu_1 \times (\mu_2 \times \mu_3 )$$
\end{corollary}
\begin{proof}
    DIY. 前者 play with def, 后者直接由 $\sigma$-finite 的 premeasure 的 HK extension unique 得到. 
\end{proof}


\section{如何证明一个函数 product measurable}

要证明一个函数是 product measurable 的, 只需要证明它对于每个  measurable rectangle 的 preimage 都是 measurable 的即可.
\begin{lemma}
    Suppose $f: X\to Y\times Z$ is a function from a measurable space $(X,\mathcal{A})$ to a product measure space $(Y\times Z, \mathcal{B}_1 \otimes \mathcal{B}_2)$.\\
  Claim: If $f^{-1}(B_1 \times B_2)\in\mathcal{A}$ for each measurable rectangle $B_1 \times B_2 \in \mathcal{B}_1 \otimes \mathcal{B}_2$, then $f$ is an $(\mathcal{A}, \mathcal{B}_1 \otimes \mathcal{B}_2)$-measurable function.
\end{lemma}
\begin{proof}
    因为 product $\sigma$-algebra 由所有的 measurable rectangles 生成. \\
    Hw7 中有另一版的证明作为 lemma.
\end{proof}
在 Hw7 中我们可以通过这个 lemma 得到一个结论: 如果 $E \in \mathcal{A\otimes A}$, 那么 $E$ 的 diagonal 一定 $\in \mathcal{A}$.


对于特殊的函数, 比如两个 measurable function 的乘积, 其一定是 product measurable 的.
\begin{lemma}{easier Fubini}
条件: $(X,\mathcal{A},\mu)$, $(Y,\mathcal{B}, \nu)$ 为 arbitrary measure space (不需要 $\sigma$-finite.), $f:X\to \mathbb{C}$, $g:Y \to \mathbb{C}$ 为 measurable functions.\\
结论: \[
h:= fg  \quad \text{is } (\mathcal{A} \otimes \mathcal{B}) \text{-measurable}
\]
并且如果 $f,g$ 是 $L^1$ 的, 那么 $h \in L^1(\mu \times \nu)$ 并且 \[
\int h \; d(\mu\times \nu) = \Big( \int f \; d\mu \Big)\Big( \int g \; d\nu \Big)
\]
\end{lemma}
\begin{proof}
     in hw 8. 这个 statement 表示一个 $\mathcal{A} \text{-measurable}$ 的函数和一个 $\mathcal{B} \text{-measurable}$ 的函数的乘积是 $(\mathcal{A} \otimes \mathcal{B}) \text{-measurable}$ 的.\end{proof}