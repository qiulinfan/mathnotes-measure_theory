\chapter{distribution function 与 Lebesgue-Stieltjes measures}

\section{distribution function and Borel measures on $\mathcal{B}(\mathbb{R})$ [Fol 1.5]}
This lecture: 
1. distribution function 是 increasing 且 right continuous 的, 
2. 任意 increasing 且 right continuous 的函数可以作为 distribution function, 用它来构造它对应的 measure.


\subsection{distribution function of a locally finite (i.e. regular) Borel measure}
\begin{definition}{distribution function of $\mu$}
给定一个 \textbf{locally finite (finite on all compact sets)} 的 \textbf{Borel measure} on $\mathbb{R}$ (即 $(\mathbb{R}, \mathcal{B}(bR), \mu)$), 我们定义:
$$
F_\mu(x ) := \begin{cases}
    \mu((0,x]) \quad  , x \geq 0 \\
     -\mu((x,0]) \; , x < 0
\end{cases}
$$
这个函数被称为 $\mu$ 的 \textbf{distribution function.}
\end{definition}
\begin{remark}
一个 \textbf{locally finite (finite on all compact sets)} 的 Borel measure on $\mathbb{R}^n$ 被称为一个 regular measure.\\
 在 Ch 3 中, 我们将在讨论 $\mathbb{R}^n$ 上 regular measure 对于 Lebesgue measure 的 derivative.
\end{remark}
\begin{proposition}
        容易发现: $F$ 是 $\mu$ 的 distribution function, 当且仅当 $\mu((a,b]) = F(b) - F(a)$, 任取这样的 interval.
\end{proposition}
这两个定义是等价的. 



\begin{theorem}{distribution function is increasing and right ctn}
对于 $\mathbb{R}$ 上的任意 locally finite Borel measure $\mu$, 其 distribution function $F_\mu$ 都是 increasing 且 right continuous 的.
(right ctn:$$F_\mu(a) = \lim_{x\rar a^+} f(x)$$
\end{theorem}
\begin{proof}
    increasing: trivially by monotonicity of measure.\\
    right continuous: follows from measure 的 ctnity. 正轴上: $\mu((0,x+ 1/n])$ 的 sequence 极限为 $\mu(0,x])$, by ctn from above; 负轴上, $\mu((x+ 1/n,0])$ 的 sequence 极限为 $\mu((x,0])$, by ctn from below.\\
\end{proof}
\begin{remark}
   \textbf{ Note: distribution function 是 right ctn 的, 但却未必是 left ctn 的.}
   因为我们构造离散的 measure, 使得这个 distribution function 具有间断点. 这样导致了左不连续.
   反例: 例如 atomic measure. 
\end{remark}





\subsection{any increasing and right ctn function is a unique distribution function}
\begin{definition}{h-interval}
    我么定义形如 $(a,b]$, $(-\infty, b]$ 的 $\mathbb{R}$  的子集, 以及 $\varnothing$, $\mathbb{R}$, 为 h-intervals.
\end{definition}
h-intervals 即\textbf{所有的左开右闭区间.}
\pic[0.2]{assets/ch1-pics-1.png}


\begin{lemma}{h-intervals form an algebra and generate borel set}
    $$
    \mathcal{A}_0 := \{  \text{finite (disjoint) unions of h-intervals}\}
    $$
是一个 algebra, 并且
$$
<\mathcal{A}_0> = \mathcal{B}(\mathbb{R})
$$
\end{lemma}
\begin{proof}
    trivial. follows from lec 2 的 generating set of borel set on $\mathbb{R}$.
\end{proof}




\begin{theorem}{\textbf{任意 increasing 且 right ctn 函数都是某个 regular Borel measure 的 distribution 函数}}
取 lemma 中的 $\mathcal{A}_0$.
对于\textbf{任意的 increasing 且 right ctn 的 $F: \mathbb{R} \to \mathbb{R}$,} 我们 define $\mu_0: \mathcal{A}_0 \to [0,\infty]$, by:
$$
\mu_0(\bigcup_{i=1}^n (a_i, b_i]) = \sum_{i=1}^n (F(b_i) - F(a_i))
$$ 并规定 $\mu_0(0) = 0$, 以及 $F(\infty) = \lim_{x\rar \infty } F(x)$\\,
\textbf{Claim 1: $\mu_0$ 是一个 $\mathcal{A}_0$ 上的 $\sigma$-finite premeasure.}\\
\textbf{Claim 2: (by Hahn-Kolmogrov) $\mu_0$ extend to a locally finite Borel measure $\mu_F$}, 并且 $\mu_F ((a,b]) = F(b) - F(a)$ for any h-interval, i.e. $F$ 是 $\mu_F$ 的 distribution function.\\
Claim 3: \textbf{$F$ 是 $\mu_F$ 的唯一 distribution function up to constant term}, in the sense that 任意其他的 such function $G$ 如果也是$\mu_F$ 的 distribition function, 则必然有 $F-G$ 为 const. 
\end{theorem}

\begin{proof}
Claim1 
\begin{enumerate}
    \item well-definedness of $\mu_0$: 对于两个结果一样的 union, finding common refinement 即可.
    \item $\mu_0(\varnothing) = 0$: 因为 $\varnothing$ 就是 $(a,a]$.
    \item finite additivity: trivial.
    \item $\sigma$-finiteness: each $\mu_0((n, n+1]) < \infty$
    \item \textbf{ctbl additivity: nontrivial, 下面详细展开.}
\end{enumerate}
Suppose $A_1, A_2, \cdots$ 是 seq of disjoint h-intervals in $\mathcal{A}_0$. Let $A := \bigsqcup_{i}A_i $.\\
WTS: $\mu_0(A) = \sum_i \mu_0(A_i)$.\\
(1) WTS $\mu_0(A) \geq \sum_i \mu_0(A_i)$
这个 direction easy. We define $B_n  := \bigsqcup_1^n A_i$, 由 finite additivity 得到: $\mu_0(B_n) = \sum_{i}^n \mu_0(A_i)$, 从而 
$$
\mu_0(A) = \mu_0(B_n) + \mu_0(A \setminus B_n) \geq \mu_0(B_n)
$$ for each $n$, 由于这是一个 numerical seq, 可以 conclude $\mu_0(A) \geq \sum_i \mu_0(A_i)$.
(2) WTS $\sum_i \mu_0(A_i) \geq \mu_0(A)$.\\
这个 direction 较难, 需要用到 $\epsilon / 2^n$ 的 argument.\\
For simplicity, 我们只需要考虑 $A_i = (a_i, b_i]$ 的 interval 形式, 其他形式 can trivially prove. 并且, 由于 $\mathcal{A}_0$ 中任何一个元素至多只有 finite 个离散的 h-intervals, 我们 \textbf{suffice to assume $A$ 是一个 h-interval.} \\
从而, 我们也可以 denote $A = (a,b]$.\\
Let $\epsilon > 0$.\\
By $F$ 的 increasing 和 right ctn, 存在 $\delta, \delta_i$ s.t.
$$
F(a+ \delta)- F(a) \leq \epsilon
$$
同样地, 对于每个 $A_i$. 我们都可以找到 $\delta_i$ 使得 
$$
    F(b_i + \delta_i) - F(b_i) \leq \frac{\epsilon}{2^i}
$$
于是 $(a_i, b_i+\delta_i)_{i \in \bN}$ 就形成了一个 open covering for $[a+ \delta, b]$. By cptness, 存在一个 finite subcovering $(a_i, b_i+\delta_i)_{1 \leq i \leq N}$.\\
By relabelling, \textbf{我们 suppose $A_i$ 是从左到右排序的. 于是每个 $b_i + \delta_i$ 都处于下一个 $A_{i+1}$ 之内.}
\pic[0.2]{assets/ch1-pics-image-20250130183842172.png}
从而:
\begin{align}
    \mu_0(A) & \leq F(b) - F(a+ \delta) - \epsilon \\
    &\leq F(b_N + \delta_N) - F(a_1) + \epsilon \\
    & =  F(b_N + \delta_N) - F(a_N) +\sum_1^{N-1} (F(a_{i+1}  ) - F(a_i)) + \epsilon \\
    & \leq  F(b_N + \delta_N) - F(a_N) +\sum_1^{N-1} (F(b_i + \delta_i  ) - F(a_i)) + \epsilon \\ & < \sum_1^N (F(b_i) - A(a_i) + \frac{\epsilon}{2^i}) + \epsilon
    \\ & < \sum_ 1^\infty \mu_0(A_i) + 2\epsilon
\end{align}
Claim 2, 3 都 directly follows from Hahn-Komogrov Thm.
\end{proof}
\begin{remark}
    这一证明实则简单. 关键的步骤是 1. 简化问题为 union 成一个 h-interval; 2. 通过 cptness 取 finite covering；3. 对每个 $A_i $ 取一个 $\epsilon / 2^i$ 的小 cover, 最后可以被 $\epsilon$ bound.
\end{remark}



\begin{example}
我们已经证明, 从任意的 increasing 且 right ctn 的函数都可以构造出一个以其为 distribution function 的 locally finite Borel measure on $\mathbb{R}$, 因而我们简称这样的函数都叫做 distribution function.\\
以下为两个 distribution function 的例子:\\
1.  Heaviside function $$H(x)  = \begin{cases}
    1 \;\; ,x\geq 0\\
    0 \;\; ,x < 0
\end{cases}    $$
2. 我们将 $\mathbb{Q}$ 以某种形式列出: $\mathbb{Q} = \{q_1, q_2, \cdots\}$
而后定义:
$$
F(x) := \sum_{i = 1} ^\infty 2^{-n} H(x - r_n)   \in (0,1)
$$
这个函数通过有理数的次序给每个有理数赋了一个"weight", 并对于每个$x$, 把所有有理数分为 $> x$ 和 $\leq x$ 的两部分, 只把 $\leq x$ 的那部分有理数的权重算进 $F(x)$. 于是 $x$ 越大, 被算进 $F(x)$ 的有理数越多, $F(x)$ 就越大. (虽然每个有理数的权重是乱的). 这个函数在每一点上都 discrete.\\
这个过程可推广, 不取 $\mathbb{Q}$ 而取任意的 countable sets in $\mathbb{R}$ 作为参照.
\end{example}





本 lec 总结: 通过直接定义 distribution function 来得到的 measure, 实则就是不同于直接取 interval 长度, 我们隐性地给每个点一个 mass (类似概率密度), 从而把区间的长度中每一个点加上一个权重. 最后形成一个不一定均匀的 measure. 这个 distribution 的分布曲线决定了这个 measure.

\section{Lebesgue-Stieltjes measure [Fol 1.5, finished]}
给定一个 increasing 且 right ctn 的函数 $F$, 我们已经展示了用它作为 distribution function 来 induce 出一个 regular Borel measure $\mu_F$ on $\mathcal{B}(\mathbb{R})$. \\
在构造这个函数时, 我们使用的是用 premeasure $\mathcal{A}_0$ (of all finite unions of h-intervals), 使用 Hahn-Kolmogrov 来 induce outer measure $\mu_F^*$, 再把 restrict 它到 $<\mathcal{A}_0>$, 即 $\mathcal{B}(\mathbb{R})$ 上, 获得的 measure. \textbf{这一个 measure 是一个 Borel measure, 但是它并不 complete. }\\
recall in lec 6: 我们其实可以 complete 这个 measure, 只需要在第二步, 用 premeasure $\mathcal{A}_0$ induce 出 outer measure 后, 不要 restrict 它到 $\mathcal{B}(\mathbb{R})$ 上, 而是 restrict 到取 $\mathcal{M}_\mu := \{ \text{all } \mu_F^* \text{-measurable set\}}$ 上, 得到的就是 completion of $\mu_F$, 即 $$(\mathbb{R}, \mathcal{M}_\mu, \overline{\mu_F})$$
其中, $\mathcal{A}^*$ 是 $<\mathcal{A}_0>$ 即 $\mathcal{B}(\mathbb{R})$ 的 proper super set. \textbf{我们把这个 completed measure 叫做 Lebesgue Stieltjes measure associated with $F$, 并用 $\mu_F$ 来指代它. (刚才, 我们把未完备的 measure 叫做 $\mu_F$, 但现在我们不再使用这个 measure, 而是使用它的 completion, 并转而称它的 completion ($\overline{\mu_F}$) 为 $\mu_F$.)}
$$
\text { Regular Borel measure } \xrightarrow{\text { completion }} \text { LS measure }
$$

\begin{definition}{Lebesgue-Stieltjes measure associated with $F$}
给定一个 distribution function $F$, 我们使用它来定义 h-intervals 的 premeasure $\mu_0$, 并把这个 premeasure induce 出的 outer measure $\mu^*$ 限制在 $$\mathcal{M}_\mu := \{ \text{all } \mu^* \text{-measurable set\}}$$ 上, 由 Carathéodory Thm 得它是 complete 的. 称这个 complete 的 measure $$\mu_F := \mu^* |_{\mathcal{M}_\mu}$$ 为 \textbf{Lebesgue Stieltjes measure associated with $F$. }
\end{definition}
\begin{remark}
根据定义, 对于任意 $E \in \mathcal{M}_\mu$, 它的 LS measure 为:$$
\mu_F(E) = \inf \{ \sum_1^\infty (F(b_i) - F(a_i))   \mid E \sub \bigcup_1^\infty (a_i, b_i]      \}
$$
\end{remark}

\subsection{inner and outer regularity of LS measure}

虽然我们使用 h-intervals 来 induce 了这个 measure, 但是实际上我们在表示 measure 时,可以用 open intervals 来代替 h-intervals:
\begin{lemma}{open intervals can substitute for h-intervals when computing measure}
固定一个 Lebesgue-Stieltjes measure associated with $F$, 任意 $E \in \mathcal{M}_\mu$, 它的 measure 等于:$$
\mu_F(E) = \inf \{ \sum_1^\infty (F(b_i) - F(a_i))   \mid E \sub \bigcup_1^\infty (a_i, b_i)      \}
$$
\end{lemma}
\begin{proof}
    每个 open interval 都等于 a ctbl disjoint union of h-intervals, 从而是在这个被取 inf 集合内的; 所以只需要证明能取到这个 inf 即可.
    Fix $\epsilon > 0$, 我们根据定义可以取到一个 seq $(a_i, b_i]$ 使得它 measure sum $\leq \mu(E) + \epsilon /2$, 而我们对于每个 $i$, 在 interval 的右边再取一个 $ <\epsilon/2^{i+1}$ 的 $\delta_i$, 就变成了一个 open interval, 并且最后距离这个 h-interval seq 的 measure sum 差距至多 $\epsilon/2$. 从而得证.
\end{proof}


\begin{theorem}{\textbf{outer regularity}}
\label{outer regularity}
对于一个 Lebesgue-Stieltjes measure associated with $F$, 任意 $E \in \mathcal{M}_\mu$, 它的 measure 等于:
\begin{equation}
    \mu_F(E) = \inf \{ \mu_F(U) \mid  U \text{ open , and } E \sub U  \}
\end{equation}
\end{theorem}


\begin{proof}
    Directly follows from lemma. 首先, by monotonicity, 一个包含 $E$ 的开集 $U$ 的 $\mu_F$ 一定比 $E$ 的大. 并且, 对于任意的 $\epsilon > 0$, 都可以找到一个 open covering 使得 measure sum $< \mu_F(E) + \epsilon$, by def.\\
\end{proof}

\begin{theorem}{\textbf{inner regularity}}
\label{inner regularity}
对于一个 Lebesgue-Stieltjes measure associated with $F$, 任意 $E \in \mathcal{M}_\mu$, 它的 measure 等于:
\begin{equation}
    \mu_F(E) = \sup \{ \mu_F(K) \mid  K \text{ compact , and } K \sub E  \}
\end{equation}
\end{theorem}
\begin{proof}
    首先证明 $E$ bounded 的 case. 假设 $E$ bdd. \\
    如果 $E$ closed, 则 $E$ cpt, trivially true. \\
    如果 $E$ open, 那么 $E$ 的 bounadry 是 closed (cpt) 的, 从而 $\partial E \in \mathcal{M}_\mu$ 
    我们 let $\epsilon >0$. 我们对 $\partial E$ 使用 outer regularity, 可以取一个 open set $U$ covering $\partial E$, 并且使得 $\mu_F(U) \leq \mu_F(E) + \epsilon$\\
    此时取 $K := E \setminus U$, 我们发现这是一个 approximating $E$ 的 compact set, 并且有:
    $$
    E = K \sqcup (U \cap E)
    $$
从而:
\pic[0.4]{assets/ch1-pics-image-20250131003019214.png}
而对于 unbounded 的 case, 直接由 
$$
E  = \bigsqcup_j (E \cap (j,j+1])
$$得到.
\end{proof}
\begin{remark}
outer / inner regularity 表示, $\mathbb{R}$ 上一个 (LS-measurable set 的) LS measure 就等于它内部用 cpt set 逼近它的 measure limit; 以及等于它外部用 open set 逼近它的 measure limit.\\
这个性质也可以推广到 $\mathbb{R}^n$ 上.
\end{remark}




\subsection{Lebesgue-Stieltjes measurable 的等价条件}
\begin{definition}{$G_\delta, F_\sigma$ sets}
Topological space 中, 一个 \textbf{coutable intersection of open sets 被称为一个 $G_\delta$ set}, 一个 \textbf{countable union of closed sets 被称为一个 $F_\sigma$ set}.
\end{definition}
\begin{remark}
    topological space 中, finite intersection of open sets 还是 open set, 但是 countable intersection 则未必; finite union of closed sets 还是 closed set, 但是 countable union 则未必.\\
$G_\delta$ sets 包括了所有的 open sets, 以及一部分扩充; $F_\sigma$ sets 包括了所有的 closed sets, 以及一部分扩充.
\end{remark}



\begin{theorem}{Lebesgue-Stieltjes measurable 的等价条件}
\label{Lebesgue-Stieltjes measurable 的等价条件}
TFAE:
\begin{enumerate}
    \item[i] $$E \in \mathcal{M}_\mu$$
    \item[ii] 存在一个 $G_\delta$ set $V$ 以及一个 measure zero set $N_1$ ($\mu_F(N_1) = 0$) 使得   $$E = V \setminus N_1$$
    \item[iii] 存在一个 $F_\sigma$ set $H$ 以及一个 measure zero set $N_2$ ($\mu_F(N_2) = 0$) 使得 $$E = H \cup N_2$$
    \item[iv] 存在一个 open set $U$ 使得对于任意的 $\epsilon > 0$, 都有 $$\mu^*(U \setminus E) < \epsilon $$
\end{enumerate}
\end{theorem}

\begin{proof}
由 (ii) 和 (iii) 推得 (i) 是 trivial 的. 这是因为 LS measure 是 complete measure, 任意 null set 都是 measurable 的.
由 (i) 推 (ii) 和 (iii): follows from outer 与 inner regularity. 假设 $E$ 是 LS-measurable 的, 我们直接取一个 inner seq of cpt subsets 以及一个 outer seq of open super sets, 使得
\begin{equation}
    \mu_F(U_j) -  \frac{1}{2^i} \leq \mu_F(E) \leq \mu_F(K_j ) + \frac{1}{2^i}
\end{equation}
于是就得到: $V := \intsec_i U_i$, $H := \bigcup_i K_i$, 与 $E$ 的差集都是一个 null set. 并且它们分别为 $G_\delta$ 和 $F_\sigma$ sets.
\end{proof}
\begin{remark}
    $\sigma$-algebra 和 topology 各自只 closed under finite 的交和并, 而 $<\mathcal{B}(\mathbb{R})>$ 则 closed under ctbl 交和并, 从而所有的  $G_\delta$ 和 $F_\sigma$ sets 都在其中. $\mathcal{M}_\mu$ 是一个比 $<\mathcal{B}(\mathbb{R})>$ 更大的集合, 但是其实它其中的元素都可以用 $G_\delta$ 和 $F_\sigma$ sets, 即 $<\mathcal{B}(\mathbb{R})>$ 中的集合来逼近. 这是合理的, 因为 completion 就是把一些 subnull sets 加入到了 $\sigma$-algebra 里.
\end{remark}





\subsection{Lebesgue measure and its invariance properties}
\begin{definition}{Lebesgue measure}
Lebesgue measure 即 Lebesgue-Stieltjes measure associated with $F(x) = x$.
我们用 $m:=\mu_F$ 来表示它, 并用 $\fL := \mathcal{M}_m$ 来表示所有的 Lebesgue measurable sets.\\
从而 $\mathbb{R}$ 上的 Lebesgue measure space 表示为:
$$
(\mathbb{R}, \fL, m)
$$
\end{definition}
\begin{remark}
    Lebesgue measure 是最 normal 的 Lebesgue-Stieltjes measure, 它 preserve intervals 的长度作为其 measure: 
    $$
    m((a,b]) = b -a
    $$
\end{remark}


\begin{theorem}{$\fL$ preserves translation and scaling}
    if $E \in \fL$ $\Longrightarrow$ $E+s, rE \in \fL$ $\forall s,r \in \mathbb{R}$.\\
    并且, $m(E+s) = m(E), m(rE) = |r| m(E)$
\end{theorem}
\begin{proof}
首先, 如果 $E \in \mathcal{B}(\mathbb{R})$, 那么 by hw 1, 我们证明了 $\mathcal{B}(\mathbb{R})$ 是 closed under translation 和 scaling 的, 因而 $rE, E+s \in \mathcal{B}(\mathbb{R})$.\\
我们 define on $\mathcal{A}_0:=$ $\{\text{finite union of h-intervals}\}$:
$$
m_s(E) := m(E+s)
$$
$$
m^r(E) := m(rE)
$$
显然, 这两个函数 agree with $m, |r|m$. \textbf{由于 $m$ 是 $\sigma$-finite 的, 从而 by Hahn-Kolmogrov, 它 uniquely extend to $\mathcal{B}(\mathbb{R})$}. 因而, $m_s$ 在 $\mathcal{B}(\mathbb{R})$ 上和 $m$ 相等, $m^r$ 在 $\mathcal{B}(\mathbb{R})$ 上和 $|r|m$ 相等. 并且, 我们知道\textbf{ $(\mathbb{R}, \fL, m)$ 是 completion of $(\mathbb{R}, \mathcal{B}(\mathbb{R}),m)$}, 因而 $m_s$ 也同样 complete to $m$ on $\fL$. (同理, $m^r$ 也同样 complete to $|r|m$ on $\fL$)
\end{proof}
\begin{remark}
    我们只要证明两个 measure function 在 premeasure 上相等或称倍数关系, 就能证明它们在 induced (complete) measure 上相等.\\
此外, 有另一种证明方式. After we know $m_s$ 在 $\mathcal{B}(\mathbb{R})$ 上和 $m$ 相等, $m^r$ 在 $\mathcal{B}(\mathbb{R})$ 上和 $|r|m$ 相等, 我们由 \ref{Lebesgue-Stieltjes measurable 的等价条件} Lebesgue-Stieltjes measurable 的等价条件 可知: $\fL$ 上的集合一定是一个 Borel set 并上一个 null set, 由于 null set 的 measure 在经过 translation 和 scaling 后仍然是 0, 同样得证.
 \end{remark}


\section{measurable function [Fol 2.1]}
\subsection{general measurable function}
\begin{definition}{$(\mathcal{M}, \cN)$-measurable function}
Let $(X,\mathcal{M})$, $(Y,\cN)$ be measurable spaces, 如果 $f: X \rar Y$ 满足: $$B \in \cN \implies f^{-1}(B) \in \mathcal{M}$$, 则称 $f$ 为一个 $(\mathcal{M}, \cN)$-measurable function.
\end{definition}
从一个 measurable space 到另一个 measurable space 的 function 被称为 measurable 的条件是: 被映射到可测集的集合只能是可测集.

这个定义和 topological space 上 continuous 的定义: 被映射到开集的只能是开集, 形式是完全一样的. 并且我们知道, topological space 和 measure space 也有很多相似之处. 因而连续性和可测性有一定的关系.

函数的可测性的定义是 with respect to 它们所在可测空间选定的 $\sigma$-algebra 的, 就像 topologica spaces 之间函数的连续性的定义是 with respect to 它们所在的 topological spaces 选定的 topology.

这两个定义都表示的是: 性质不好的集合不会被映射到性质良好的集合. (但是性质良好的集合有可能被映射到性质不好的集合.)


\begin{proposition}{composition preserves measurability}
    如果 $f$ 是 $(\mathcal{A},\mathcal{B})$-measurable 的, $g$ 是 $(\mathcal{B}, \mathcal{C})$-measurable 的, 那么 $g \circ f$ 是 $(\mathcal{A}, \mathcal{C})$-measurable 的.
\end{proposition}
\begin{proof}
    Trivial.
\end{proof}

\begin{lemma}
    Let $(X,\mathcal{M})$, $(Y,\cN)$ be measurable spaces, 如果 $\cN = <\varepsilon>$ for some $\varepsilon \sub Y$, 那么 
\begin{center}
    $f: X \rar Y$  $(\mathcal{M},\cN)$-measurable  $\Longleftrightarrow$ $f^{-1}(E) \in \mathcal{M}  \quad \forall E \sub \varepsilon$
\end{center}

\end{lemma}
\begin{proof}
foward direction: trivial.\\
backward direction: Let
$$
D: = \{ E \sub Y \mid f^{-1}(E) \in \mathcal{M}\}
$$
容易证明: $D \supseteq \varepsilon$, 并且 $D$ 是一个 $\sigma$-algebra.\\
因而 $D \supseteq <\varepsilon> = \cN$
\end{proof}
\begin{remark}
    如果我们知道 $\cN$ 是由某个子集生成出来的, 那么对于映射到这个 measurable space 的函数, 只要保证这个子集中的每个集合的 preimage 都是可测集就可以了, 可以 reduce 判断 $f$ measurable 的条件.

    同样类比 topological space, 如果 $Y$ 的 topology 存在一个 basis, 那么判断 $f: X\rar Y$ 连续, 只需要判断这个 basis 的 preimage 都是 open 的就好了.
\end{remark}

\begin{proposition}
对于 topological space $X,Y$, let $f:X\rar Y$
\begin{center}
    $f$ continuous $\implies$$f$ 是 $(\mathcal{B}(X),\mathcal{B}(Y))$ measurable 的.
\end{center}
\end{proposition}
\begin{remark}
    topological spaces 之间, 连续函数一定是在它们的 Borel algebra 之间 measurable 的.
\end{remark}




\subsection{real and complex-valued measurable function}
\begin{definition}{(real-valued) measurable functions}
Let $(X,\mathcal{A})$ be a measurable space, 
对于 $f: X \rightarrow \overline{\mathbb{R}}$ 如果它是 $(\mathcal{A}, \mathcal{B}(\overline{\mathbb{R}}))$-measurable 的, 我们直接简称它是 $\mathcal{A}$-measurable 的, 或者简称为 measurable 的.

\end{definition}
\begin{remark}
    实际上, 使用无穷作为值, 就是把\textbf{原本不在定义域上的无穷跳跃点放到了定义域上}, 些情况下, 仅仅是一种方便的记号，但它们通常不会被视为真正的值.
    
    但是等价地, 我们为了便利一般都会使用 extended real number system 来进行分析, 把这些无穷间断当作无穷的值来进行分析. 
    
    这样做法的合理性是, 对于\textbf{零测集大小多个这样的无穷间断点}, 在 Lebesgue 积分体系下这一行为\textbf{并不会影响函数的 integrability 以及 integral 的值}, 因而我们可以这么做. 这一点之后并不会造成困扰, 因为我们在之后定义可积空间时, 会避开有超过零测集大小多个无穷间断点的函数, 以及无法定义的行为.

    我们容易验证:
    $$
    \mathcal{B}(  \overline{\mathbb{R}}) = \{  E \subseteq \overline{\mathbb{R}}  \mid  E\cap \mathbb{R} \in \mathcal{B}(\mathbb{R})   \}
    $$
    
    以及, $   \mathcal{B}(  \overline{\mathbb{R}}) $ 的 generating set 可以是所有的 $(a, \infty]$ 集合或者 $[-\infty, a)$ 集合\textbf{.} 所以\textbf{一个 map to $\overline{\mathbb{R}}$ 的函数是可测的, 当且仅当任意 $ (a, \infty]$ 的 preimage 都可测}.\\
    \end{remark}


\begin{definition}{(complex-valued) measurable functions}
    如果 $f: X \rightarrow \mathbb{C}$ 满足: $\re f, \im f$ 都是 (real-valued) $X$-measurable 的, 那么也称 $f$ 是 $X$-measurable 的, 或者直接说是 measurable 的.
\end{definition}
\begin{remark}
    任意 complex function $f$ 都可以写为
$$
    f = \re f + i \im f
    $$
    这个定义其实等价于 $f$ 是 $(\mathcal{M}, \mathcal{B}(\mathbb{C}))$-measurable 的, 因为这个 statment 等价于 $\re f$, $\im f$ 都是 (real-valued) $X$-measuable 的, 这是因为 $$\borel(\mathbb{C}) \equiv \borel(\mathbb{R}^2) = \borel(\mathbb{R}) \otimes \borel(\mathbb{R})$$
\end{remark}




\begin{definition}{Lebesgue measurable functions, Borel measurable functions}
Naturally, 如果 $f: \mathbb{R} \rightarrow \mathbb{C}$ 是一个 $\mathfrak{L}$-measurable 的函数, 那么我们称 $f$ 是 \textbf{Lebesgue measurable} 的.

同样地, 如果它是一个 $\mathcal{B}(\mathbb{R})$-measurable 的函数, 称 $f$ 是 \textbf{Borel measurable} 的. 
\end{definition}


\begin{proposition}
    在任何 $\mathcal{M}$-measurable function $f$ 前 compose 一个 Borel measurable 的 function, 结果仍然是 $\mathcal{M}$-measurable 的, follows from composition preserves measurability.
\end{proposition}
\begin{proof}
    Follows from def.
\end{proof}
\begin{example}
    $f^2$, $-3f$, $\frac{1}{|f|}$ ($f\not= 0$) 都仍然是 $\mathcal{M}$-measuble 的.
\end{example}



\subsection{arithmetic and sequential preservation of measurable functions}
\begin{proposition}{addition and multiplication 保留 measuability}
    如果 $f,g$ 是 $\mathcal{M}$-measurable function, 那么 $f+g, fg$ 也是.
\end{proposition}
\begin{proof}
Suffices to assume $f,g$ is (extended) real-valued. Complex case follows trivially.

Suppose $f,g$ 是 $\mathcal{M}$-measurable 的, 我们想要证明: $f+g$ 是 $\mathcal{M}$-measurable 的, suffices to show: $(f+g)^{-1}(a,\infty] \in \mathcal{M}$ for any $a\in \mathbb{R}$.

我们 notice:
\begin{equation}
    \{x\in X \mid f(x) + g(x) > a  \} = \bigcup_{r \in \mathbb{Q}} \{  x \mid f(x) > r \} \cap \{  x \mid g(x) > a-r \}
\end{equation}
于是 finishes the proof.

对于 $fg$, 我们发现有 
$$
fg = \frac{1}{2}((f+g)^2 - f^2 - g^2)
$$
于是也 finishes the proof, following 前一个 proposition.
\end{proof}

\begin{lemma}{sequential behavior of real-valued measurable function}
如果 $\{ f_n :X\rightarrow   \overline{\mathbb{R}}\}_{n\in\mathbb{N}}$ 是一个 seq of $\mathcal{M}$-measurable functions, 那么
\begin{itemize}
    \item $$g_1(x) : = \sup_j f_j(x)$$
    \item $$g_2(x) : = \inf_j f_j(x)$$
    \item $$g_3(x) : = \limsup_{j \rightarrow \infty} f_j(x)$$
    \item $$g_4(x) : = \liminf_{j \rightarrow \infty} f_j(x)$$
\end{itemize}
都是 $\mathcal{M}$-measurable 的.
\end{lemma}
\begin{proof}
 \[
g_1(x) = \sup_{j \in \mathbb{N}} f_j(x).
\]
由上确界的定义：
\[
g_1(x) > a \iff \exists j \in \mathbb{N}, \text{ such that } f_j(x) > a.
\]
因此，
\[
\{ x \mid g_1(x) > a \} = \bigcup_{j \in \mathbb{N}} \{ x \mid f_j(x) > a \}.
\]
因而:
$$
g_1 ^{-1}((a,\infty]) = \bigcup_1^\infty f_j ^{-1} ((a,\infty])
$$

由于 \( f_j \) 可测，集合 \( \{ x \mid f_j(x) > a \} \) 是 \(\mathcal{M}\)-measurable ，而可测集合的可数并仍然是可测的，因此 \( g_1 \) 可测。

inf: dually.

limsup: 等于 inf of sup ($k\geq n$)

liminf: 等于 sup of inf  ($k\geq n$)
\end{proof}
\begin{remark}
    从这个 proof 里笔者发现了这个惊人的事情。居然有
  $$
(sup_{j} f_j) ^{-1}((a,\infty]) = \bigcup_1^\infty f_j ^{-1} ((a,\infty])
$$
但是仔细想想也是合理的. 因为 function seq 的 sup 函数能够 map 到的值大的元素肯定比其中任何一个 function $f_n$ 更多. 并且其中存在一个 limit 关系.

以及得出了一个很重要的结论: \textbf{可测函数的 seq 的各种极限仍然是可测函数.}
\end{remark}


\begin{corollary}
    如果 $\{ f_n :X\rightarrow   \overline{\mathbb{R}}\}_{n\in\mathbb{N}}$ 是一个 seq of $\mathcal{M}$-measurable functions, 且在任意 $x$ 处极限都存在, 那么
$$
f(x) := \lim_{j\rightarrow \infty} f_j(x)
$$
是 $\mathcal{M}$-measurable 的.
\end{corollary}
\begin{proof}
    directly follows from lemma. 因为 $x$ 处极限如果存在, 那么 $\sup_f f_j (x)  = \inf_j f_j(x) $
\end{proof}





\begin{corollary}
    $f,g$ $\mathcal{M}$-measurable $\implies$ $\max(f,g), \min(f,g)$$\mathcal{M}$- measurable 
\end{corollary}
\begin{proof}
    two element sequence, 剩余的用空集, 于是 follows form above.
\end{proof}



\begin{remark}
    于是我们知道, 当我们把 $f$ 拆分成 $f^+ := \max(f,0)$, $f^- := \max(-f,0)$, 我们有 

    \begin{center}
 \textbf{ $f$ $\mathcal{M}$-measurable $\implies$ $f^+, f^-$ $\mathcal{M}$-measurable}
    \end{center}

并且由于 $f = f^+ - f^-$, 反向也成立. 并且 $|f| = f^+ + f^-$, 因而有:
\begin{center}
     \textbf{ $f$ $\mathcal{M}$-measurable $\Longleftrightarrow$ $f^+, f^-$ $\mathcal{M}$-measurable} \textbf{$\Longleftrightarrow$ $|f|$ $\mathcal{M}$-measurable}
\end{center}
\end{remark}
